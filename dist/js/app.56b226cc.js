(function(t){function e(e){for(var n,i,o=e[0],s=e[1],u=e[2],l=0,p=[];l<o.length;l++)i=o[l],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&p.push(a[i][0]),a[i]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n]);d&&d(e);while(p.length)p.shift()();return c.push.apply(c,u||[]),r()}function r(){for(var t,e=0;e<c.length;e++){for(var r=c[e],n=!0,o=1;o<r.length;o++){var s=r[o];0!==a[s]&&(n=!1)}n&&(c.splice(e--,1),t=i(i.s=r[0]))}return t}var n={},a={app:0},c=[];function i(e){if(n[e])return n[e].exports;var r=n[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=t,i.c=n,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(r,n,function(e){return t[e]}.bind(null,n));return r},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],s=o.push.bind(o);o.push=e,o=o.slice();for(var u=0;u<o.length;u++)e(o[u]);var d=s;c.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},"034f":function(t,e,r){"use strict";r("85ec")},"109b":function(t,e,r){"use strict";r("71bf")},1757:function(t,e,r){},"24eb":function(t,e,r){"use strict";r("995b")},"2f40":function(t,e,r){"use strict";r("c764")},"406b":function(t,e,r){"use strict";r("c7ba")},"56d7":function(t,e,r){"use strict";r.r(e);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("2b0e"),a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"app"}},[r("Header"),r("List"),r("Cart")],1)},c=[],i=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"header"},[r("h3",[t._v(" Товаров в корзине на: "+t._s(t.cartPrice.toFixed(2))+" "+t._s(this.$store.state.currency)+" ")])])},o=[],s={name:"Header",computed:{cartPrice:function(){return this.$store.getters.getCartSum}}},u=s,d=(r("24eb"),r("2877")),l=Object(d["a"])(u,i,o,!1,null,"780b6cae",null),p=l.exports,f=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"product-list"},t._l(t.products,(function(t){return r("ProductItem",{key:t.id,attrs:{product:t}})})),1)},m=[],b=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"card"},[r("p",{staticClass:"card-title"},[t._v(t._s(t.product.title))]),r("img",{staticClass:"card-image",attrs:{src:t.product.image,alt:"card-image"}}),r("p",{staticClass:"card-price"},[t._v(" Цена: "+t._s(t.product.price)+" "+t._s(this.$store.state.currency)+" ")]),r("div",[r("input",{directives:[{name:"model",rawName:"v-model",value:t.amount,expression:"amount"}],staticClass:"amount-input",attrs:{type:"number",id:"id"},domProps:{value:t.amount},on:{input:function(e){e.target.composing||(t.amount=e.target.value)}}}),r("label",{attrs:{for:"id"}},[t._v("кг")])]),r("button",{staticClass:"add-btn",on:{click:t.addToCart}},[t._v("В корзину")])])},v=[],g={name:"ProductItem",props:{product:{type:Object,required:!0}},data:function(){return{amount:1}},methods:{addToCart:function(){this.$store.commit("addProductToCart",{id:this.product.id,amount:+this.amount}),this.amount=1}}},h=g,_=(r("2f40"),Object(d["a"])(h,b,v,!1,null,"72695d12",null)),C=_.exports,y={name:"List",components:{ProductItem:C},methods:{startPricesMonitoring:function(){setInterval(this.getList,2e3)},getList:function(){this.$store.dispatch("getProductsList")}},computed:{products:function(){return this.$store.state.products}},created:function(){this.getList(),this.startPricesMonitoring()}},P=y,j=(r("109b"),Object(d["a"])(P,f,m,!1,null,"41bfc2e0",null)),O=j.exports,w=function(){var t=this,e=t.$createElement,r=t._self._c||e;return this.cart.toString()?r("div",{staticClass:"cart-wrapper"},[r("p",{staticClass:"cart-header"},[t._v("Корзина")]),r("ul",{staticClass:"cart-list"},t._l(this.cart,(function(t){return r("CartItem",{key:t.id,attrs:{item:t}})})),1)]):t._e()},x=[],$=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("li",{staticClass:"cart-item"},[r("div",{staticClass:"item-info"},[r("p",{staticClass:"item-title"},[t._v(t._s(t.item.title))]),r("span",[t._v(t._s(t.item.amount)+" кг")])]),r("p",{staticClass:"item-sum"},[t._v(" На сумму: "+t._s(this.itemSum)+" "+t._s(this.$store.state.currency)+" ")])])},L=[],S=(r("b680"),{name:"CartItem",props:{item:{type:Object,required:!0}},computed:{itemSum:function(){var t=this.item.price*this.item.amount;return t.toFixed(2)}}}),T=S,k=(r("406b"),Object(d["a"])(T,$,L,!1,null,"03d36d5b",null)),I=k.exports,E={name:"Cart",components:{CartItem:I},props:{},computed:{cart:function(){return this.$store.getters.getCart}}},M=E,H=(r("ab21"),Object(d["a"])(M,w,x,!1,null,"7548b1ba",null)),q=H.exports,F={name:"App",components:{Header:p,List:O,Cart:q}},J=F,R=(r("034f"),Object(d["a"])(J,a,c,!1,null,null,null)),A=R.exports,B=r("1da1"),D=r("2909"),G=r("5530"),N=(r("96cf"),r("4e82"),r("d3b7"),r("7db0"),r("d81d"),r("99af"),200);function V(t){return new Promise((function(e){setTimeout((function(){e(t())}),N)}))}var z={getProductsList:function(){var t=[{id:"potato",title:"Картошка",price:49.99,image:"/products/potato.jpg"},{id:"carrot",title:"Морковка",price:55,image:"/products/carrot.jpg"},{id:"cabbage",title:"Капуста",price:28.5,image:"/products/cabbage.jpg"}];return t}},K={getProductsList:function(){return V(z.getProductsList)}},Q=K,U=r("2f62");n["a"].use(U["a"]);var W=new U["a"].Store({state:{products:[],cart:[],currency:"VGBT"},getters:{getCart:function(t){return t.cart.sort((function(t,e){return e.date-t.date}))},getCartSum:function(t){return t.cart.reduce((function(t,e){return t+e.amount*e.price}),0)}},mutations:{addProducts:function(t,e){t.products=e},addProductToCart:function(t,e){var r=t.products.find((function(t){return t.id===e.id})),n=t.cart.find((function(t){return t.id===e.id})),a=(new Date).getTime();if(n){var c=t.cart.map((function(t){return t.id===n.id&&(t.amount+=e.amount,t.date=a),t}));t.cart=c}else{var i=Object(G["a"])(Object(G["a"])({},r),{},{amount:e.amount,date:a}),o=[].concat(Object(D["a"])(t.cart),[i]);t.cart=o}}},actions:{getProductsList:function(t){return Object(B["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,e.prev=1,e.t0=r,e.next=5,Q.getProductsList();case 5:e.t1=e.sent,(0,e.t0)("addProducts",e.t1),e.next=12;break;case 9:e.prev=9,e.t2=e["catch"](1),console.log(e.t2);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})))()}}});n["a"].config.productionTip=!1,new n["a"]({store:W,render:function(t){return t(A)}}).$mount("#app")},"71bf":function(t,e,r){},"85ec":function(t,e,r){},"995b":function(t,e,r){},ab21:function(t,e,r){"use strict";r("1757")},c764:function(t,e,r){},c7ba:function(t,e,r){}});
//# sourceMappingURL=app.56b226cc.js.map